<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>
    <script>
        function Solve(input) {
            var matrixRowsAndCols = input[0].split(' ').map(Number),
                rows = matrixRowsAndCols[0],
                cols = matrixRowsAndCols[1],
                startPosition = input[1].split(' ').map(Number),
                startRow = startPosition[0],
                startCol = startPosition[1],
                matrix = [],
                counter = 1,
                moves = [],
                currentRow = 0,
                currentCol = 0,
                sumOfPath = 0,
                cellInPath = 0;

            //make  matrix
            for (var i = 0; i < rows; i++) {
                matrix[i] = [];
                for (var j = 0; j < cols; j++) {
                    matrix[i][j] = counter;
                    counter++;
                }
            }
            // makes array with moves
            var movesRow = 0,
                movesCol = 0;
            for (var i = 2; i < input.length; i++) {
                moves[movesRow] = [];
                movesRow++
                for (var j = 0; j < cols; j++) {
                    moves[movesRow][movesCol] = input[i][j];
                    movesCol++;
                }
            }
            console.log(moves);
            counter = 0;
            currentRow = startRow;
            currentCol = startCol;

            while (true) {
                if (currentRow < 0 ||
                    currentRow >= rows ||
                    currentCol < 0 ||
                    currentCol >= cols) {
                    return "out " + sumOfPath;
                }

                if (moves[currentRow][currentCol] === "l") {
                    currentCol--;
                }
                else if (moves[currentRow][currentCol] === "r") {
                    currentCol++;
                }
                else if (moves[currentRow][currentCol] === "u") {
                    currentRow--;
                }
                else if (moves[currentRow][currentCol] === "d") {
                    currentRow++;
                }


                if (matrix[currentRow][currentCol] === "a") {
                    return "lost " + cellInPath;
                }

                sumOfPath += matrix[currentRow][currentCol];
                cellInPath++;
                matrix[currentRow][currentCol] = "a";

                counter++;

            }
        }

        var args = [
            "3 4",
            "1 3",
            "lrrd",
            "dlll",
            "rddd"];

        args2 = [
             "5 8",
             "0 0",
             "rrrrrrrd",
             "rludulrd",
             "durlddud",
             "urrrldud",
             "ulllllll"
        ];

        args3 = [
         "5 8",
         "0 0",
         "rrrrrrrd",
         "rludulrd",
         "lurlddud",
         "urrrldud",
         "ulllllll"
        ];

        var testResult = Solve(args);
        console.log(testResult);

        //testResult = Solve(args2);
        //console.log(testResult);

        //testResult = Solve(args3);
        //console.log(testResult);
    </script>
</body>
</html>
